<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fork-awesome@1.2.0/css/fork-awesome.min.css">

<meta name="generator" content="Hexo 8.1.1"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS Feed"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="Search"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-DC-2通关" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/11/17/DC-2%E9%80%9A%E5%85%B3/" class="article-date">
  <time class="dt-published" datetime="2025-11-17T04:22:38.212Z" itemprop="datePublished">2025-11-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="DC-2通关"><a href="#DC-2通关" class="headerlink" title="DC-2通关"></a>DC-2通关</h1><h3 id="1️⃣环境搭建"><a href="#1️⃣环境搭建" class="headerlink" title="1️⃣环境搭建"></a>1️⃣环境搭建</h3><p>确定把两台虚拟机的网络连接都改成nat模式</p>
<p>kali：</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251113165449134.png" alt="image-20251113165449134"></p>
<p>DC2：</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251113165518575.png" alt="image-20251113165518575"></p>
<h3 id="2️⃣信息收集"><a href="#2️⃣信息收集" class="headerlink" title="2️⃣信息收集"></a>2️⃣信息收集</h3><ol>
<li><p>确定目标IP</p>
<p>由于两台电脑都选用了nat模式的网络连接，所以它们应该在一个网段，直接用kali的nmap对该网段进行扫描，看看有哪些IP是活着的，能不能发现它</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251113172350747.png" alt="image-20251113172350747"></p>
<p>通过在浏览器里输入url进行尝试，发现192.168.88.154会变成，这样</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251113172443830.png" alt="image-20251113172443830"></p>
<p>于是确定了目标IP</p>
</li>
<li><p>将IP绑定DNS，找到dc-2的页面</p>
<p>从kali打开etc&#x2F;hosts文件</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251113200939787.png" alt="image-20251113200939787"></p>
<p>写入192.168.88.154  dc-2</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251113201205161.png" alt="image-20251113201205161"></p>
<p>成功找到网页界面</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251113201125557.png" alt="image-20251113201124078"></p>
</li>
<li><p>端口扫描</p>
<p>继续使用nmap命令，键入nmap -A -p- 192.168.88.154</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251113201501354.png" alt="image-20251113201501354"></p>
<p>得到的信息：开放了80和7744端口，其中80端口的是http协议占用的端口，7744端口的是ssh安全外壳协议服务，这本应该出现在22端口的</p>
</li>
<li><p>观察网页</p>
<p>网页下面可以看出该靶场是用WordPress公开CMS模板搭建的，可知后面可针对这一点，使用wpscan工具进行爆破</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251113202225140.png" alt="image-20251113202225140"></p>
</li>
<li><p>爆破后台目录</p>
<p>使用dirb工具，对dc-2进行爆破</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dirb http://192.168.88.154 -o dc-2</span><br></pre></td></tr></table></figure>

<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251113203957936.png" alt="image-20251113203957936"></p>
<p>爆出来根目录下面有一个wp-admin的目录</p>
</li>
</ol>
<h3 id="3️⃣漏洞利用"><a href="#3️⃣漏洞利用" class="headerlink" title="3️⃣漏洞利用"></a>3️⃣漏洞利用</h3><ol>
<li><p>根据信息收集到的敏感目录，发现了登录界面</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251113204605548.png" alt="image-20251113204605548"></p>
</li>
<li><p>在这个登录界面尝试，先用admin用户试试，再换user试试</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251113204805520.png" alt="image-20251113204805520"></p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251113204852097.png" alt="image-20251113204852097"></p>
<p>根据回显我们可以判断，这里是有admin用户的，而没有user</p>
</li>
<li><p>由于我们在信息收集阶段发现了此网页使用WordPress构建，故我们使用wpscan扫描工具来扫一下</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wpscan --url http://dc-2/ -e u</span><br></pre></td></tr></table></figure>

<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251113205400340.png" alt="image-20251113205400340"></p>
<p>通过爆破我们找到了包括admin在内的三个用户名</p>
</li>
<li><p>现在我们拥有了三个用户名，我们把三个用户名存储为一个用户名字典，再配合前面使用cewl生成的密码字典进行爆破</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251113205718133.png" alt="image-20251113205718133"></p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251113205657371.png" alt="image-20251113205657371"></p>
<p>爆破，继续使用wpscan</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251113205840216.png" alt="image-20251113205840216"></p>
<p>爆破出结果如下</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251113210713205.png" alt="image-20251113210713205"></p>
</li>
<li><p>利用爆出来的jerry用户密码进行登录</p>
<p>就这么水灵灵进来了</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251113210837460.png" alt="image-20251113210837460"></p>
</li>
<li><p>通过浏览找到了一个flag2，但是看起来并没有什么卵用</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251113211025437.png" alt="image-20251113211025437"></p>
</li>
<li><p>然后这里想起来信息收集阶段，网站还开了ssh服务，我们根据ssh进行尝试，看能不能进入他的操作系统账户</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh jerry@192.168.88.154 -p 7744</span><br></pre></td></tr></table></figure>

<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251113211502884.png" alt="image-20251113211502884"></p>
<p>失败了，他的密码并没有继续使用我们上一步爆出来的密码</p>
<p>但是，我们还有一个用户叫tom可以试试</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh tom@192.168.88.154 -p 7744</span><br></pre></td></tr></table></figure>

<p>进来了</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251113212018834.png" alt="image-20251113212018834"></p>
</li>
<li><p>在tom的操作系统用户权限里看看有什么东西，ls</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251113212139463.png" alt="image-20251113212139463"></p>
<p>看到了一个flag3的文件，打开看看</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251113212317170.png" alt="image-20251113212317170"></p>
<p>这里提示我们su切换到root权限</p>
</li>
<li><p>在试了用su jerry想到jerry用户下，但是他并不能使用，是被关到了rbash里面</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251113214949881.png" alt="image-20251113214949881"></p>
<p>用vi尝试rbash绕过，进入vi</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251113220113675.png" alt="image-20251113220113675"></p>
<p>进入vi后</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251113220032795.png" alt="image-20251113220032795"></p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251113220156448.png" alt="image-20251113220156448"></p>
<p>然后添加环境变量，就可以得到输入密码的地方</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251113220451562.png" alt="image-20251113220451562"></p>
<p>输入用户密码，往后退，到家目录，查看一下，有jerry，从这进去，在查看有什么，找到flag4</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251113220803511.png" alt="image-20251113220803511"></p>
<p>查看flag4</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251113220932512.png" alt="image-20251113220932512"></p>
<p>这里显示还不是最终的flag</p>
</li>
<li><p>我们的环境变量不全，需要补齐</p>
<p>添加环境变量</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251113221801886.png" alt="image-20251113221801886"></p>
</li>
<li><p>提权</p>
<p>键入</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> git <span class="built_in">help</span> config</span><br></pre></td></tr></table></figure>

<p>再在最后行</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">!/bin/bash</span><br></pre></td></tr></table></figure>

<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251113222059041.png" alt="image-20251113222059041"></p>
<p>已经提权到root</p>
</li>
<li><p>查看有什么，找到flag</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251113222347688.png" alt="image-20251113222347688"></p>
</li>
<li><p>查看flag</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251113222456045.png" alt="image-20251113222456045"></p>
</li>
</ol>
<p>OK！</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2025/11/17/DC-2%E9%80%9A%E5%85%B3/" data-id="cuidgJ5NRFEdo2foLSqGufMYC" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-http协议" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/11/17/http%E5%8D%8F%E8%AE%AE/" class="article-date">
  <time class="dt-published" datetime="2025-11-17T04:22:29.597Z" itemprop="datePublished">2025-11-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="HTTP协议"><a href="#HTTP协议" class="headerlink" title="HTTP协议"></a>HTTP协议</h1><h2 id="web-网页"><a href="#web-网页" class="headerlink" title="web&#x2F;网页"></a>web&#x2F;网页</h2><p>操作系统，中间件，编程语言，数据库</p>
<h4 id="静态网页（几乎没有渗透测试的可能性）"><a href="#静态网页（几乎没有渗透测试的可能性）" class="headerlink" title="静态网页（几乎没有渗透测试的可能性）"></a>静态网页（几乎没有渗透测试的可能性）</h4><p>HTML，js</p>
<p>无法调用系统资源，前端用户可以直接看到源代码</p>
<p>常用于博客、政府宣传网页。</p>
<h4 id="动态网页"><a href="#动态网页" class="headerlink" title="动态网页"></a>动态网页</h4><p>php，java，与<strong>数据库</strong>进行交互</p>
<h4 id="中间件服务器（对外进行服务时需要）"><a href="#中间件服务器（对外进行服务时需要）" class="headerlink" title="中间件服务器（对外进行服务时需要）"></a>中间件服务器（对外进行服务时需要）</h4><p>Apache：适用于轻量级的web服务，php。</p>
<p>不适合访问量过大的场景，多线程场景</p>
<p>nginx：可实现负载均衡，反向代理</p>
<p>tomcat：专门为了javaweb设计的</p>
<h4 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h4><p>MySQL，Redis</p>
<h2 id="http协议"><a href="#http协议" class="headerlink" title="http协议"></a>http协议</h2><p>优点：快</p>
<h3 id="请求报文分析"><a href="#请求报文分析" class="headerlink" title="请求报文分析"></a>请求报文分析</h3><p>http请求：由<strong>请求行</strong>，<strong>请求头</strong>，<strong>请求正文</strong>三部分组成</p>
<h4 id="请求行：HTTP-报文的第1行，由空格字符分成三部分"><a href="#请求行：HTTP-报文的第1行，由空格字符分成三部分" class="headerlink" title="请求行：HTTP 报文的第1行，由空格字符分成三部分"></a>请求行：HTTP 报文的第1行，由空格字符分成三部分</h4><p>请求方法：GET</p>
<p>资源路径：&#x2F;admin</p>
<p>协议&#x2F;版本：HTTP&#x2F;1.1</p>
<h4 id="请求头：从请求报文第2行开始到第1个空行为止之间的内容"><a href="#请求头：从请求报文第2行开始到第1个空行为止之间的内容" class="headerlink" title="请求头：从请求报文第2行开始到第1个空行为止之间的内容"></a>请求头：从请求报文第2行开始到第1个空行为止之间的内容</h4><p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251112183740480.png" alt="image-20251112183740480"></p>
<h4 id="请求正文：第1个空行开始以后的所有内容"><a href="#请求正文：第1个空行开始以后的所有内容" class="headerlink" title="请求正文：第1个空行开始以后的所有内容"></a>请求正文：第1个空行开始以后的所有内容</h4><p>POST 传参</p>
<p>⚠️GET方法没有请求正文；POST有</p>
<h4 id="响应报文分析"><a href="#响应报文分析" class="headerlink" title="响应报文分析"></a>响应报文分析</h4><p>响应报文由状态行、响应报头、响应正文三部分组成</p>
<h4 id="状态行：响应报文的第1行"><a href="#状态行：响应报文的第1行" class="headerlink" title="状态行：响应报文的第1行"></a>状态行：响应报文的第1行</h4><p>协议&#x2F;版本：HTTP&#x2F;1.1</p>
<p>响应状态码：200</p>
<p>描述短语：OK</p>
<h4 id="响应报头：响应报文第二行开始到第1个空行为止的所有内容，"><a href="#响应报头：响应报文第二行开始到第1个空行为止的所有内容，" class="headerlink" title="响应报头：响应报文第二行开始到第1个空行为止的所有内容，"></a>响应报头：响应报文第二行开始到第1个空行为止的所有内容，</h4><p>其中包含了关于 HTTP 响应的重要字段。</p>
<p>响应正文：响应报文从第 个空行开始到最后的所有内容。 服</p>
<p>务器返回资源的内容，即浏览器接收到的 HTML 代码</p>
<h4 id="状态码"><a href="#状态码" class="headerlink" title="状态码"></a>状态码</h4><p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251112190606060.png" alt="image-20251112190606060"></p>
<h4 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h4><p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251112190623605.png" alt="image-20251112190623605"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2025/11/17/http%E5%8D%8F%E8%AE%AE/" data-id="cuidw1lZFpfpNLt3cwbsb7A39" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-burpsuit基础使用" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/11/17/burpsuit%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8/" class="article-date">
  <time class="dt-published" datetime="2025-11-17T04:22:26.810Z" itemprop="datePublished">2025-11-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="BurpSuit激活及基础使用"><a href="#BurpSuit激活及基础使用" class="headerlink" title="BurpSuit激活及基础使用"></a>BurpSuit激活及基础使用</h1><p>运行BurpSuit，同时运行激活脚本</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251112163615495.png" alt="image-20251112163615495"></p>
<p>同意后，把激活程序里的license复制到BurpSuit</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251112163849962.png" alt="image-20251112163849962"></p>
<p>再点击Manual activation</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251112163936259.png" alt="image-20251112163936259"></p>
<p>而后，将request复制到激活程序的第二板块，生成Activation Response，并把它贴回BurpSuit</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251112164044025.png" alt="image-20251112164044025"></p>
<p>即可成功激活</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251112164237416.png" alt="image-20251112164237416"></p>
<p>配置代理</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251112164632343.png" alt="image-20251112164632343"></p>
<p>如图，这是在监听本机的8080端口</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2025/11/17/burpsuit%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8/" data-id="cuidU1EWhwUaTBgIoNqaBMNet" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-文件共享服务" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/11/17/%E6%96%87%E4%BB%B6%E5%85%B1%E4%BA%AB%E6%9C%8D%E5%8A%A1/" class="article-date">
  <time class="dt-published" datetime="2025-11-17T04:22:19.511Z" itemprop="datePublished">2025-11-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="文件共享服务"><a href="#文件共享服务" class="headerlink" title="文件共享服务"></a>文件共享服务</h1><h3 id="SMB可以干什么"><a href="#SMB可以干什么" class="headerlink" title="SMB可以干什么"></a>SMB可以干什么</h3><p>可以为攻击者提供信息收集，凭证窃取，代码执行的三位一体能力</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">net</span> share</span><br></pre></td></tr></table></figure>

<p>信息收集：指向系统目录</p>
<p>凭证窃取：SMB服务是需要身份验证的，从而发送用户密码哈希</p>
<p>代码执行：永恒之蓝等漏洞（添加用户远程登录）</p>
<h3 id="SMB是什么"><a href="#SMB是什么" class="headerlink" title="SMB是什么"></a>SMB是什么</h3><p>文件共享、SMB、NTFS权限</p>
<p>以上三点为Windows<strong>网络管理的核心</strong></p>
<h3 id="怎么理解三者关系"><a href="#怎么理解三者关系" class="headerlink" title="怎么理解三者关系"></a>怎么理解三者关系</h3><p>其中<strong>文件共享</strong>可以理解成为大楼</p>
<p><strong>SMB协议</strong>为进出大楼规则（保安）</p>
<p><strong>NTFS权限</strong>是楼里每个屋具体使用规则</p>
<h3 id="关键交互流程"><a href="#关键交互流程" class="headerlink" title="关键交互流程"></a>关键交互流程</h3><p>通过SMB协议找到服务并请求共享</p>
<p>而后，服务器检查共享的权限</p>
<p>通过权限后，开始访问文件夹</p>
<p>NTFS权限决定用户对文件有怎么样的处理方式</p>
<p>有效权限&#x3D;共享权限和NTFS权限中更严格的一个</p>
<h4 id="文件共享服务不同域不同网段是否可以使用？"><a href="#文件共享服务不同域不同网段是否可以使用？" class="headerlink" title="文件共享服务不同域不同网段是否可以使用？"></a>文件共享服务不同域不同网段是否可以使用？</h4><p>可以使用，但是要额外的身份验证</p>
<h1 id="SMB协议详解"><a href="#SMB协议详解" class="headerlink" title="SMB协议详解"></a>SMB协议详解</h1><p>负责建立和维护网络连接，处理和文件操作相关的网络通信的</p>
<p>连接管理:建立会话，身份验证文件探作:打开、读取</p>
<p>目录操作:列出内容</p>
<p>打印机共享:通过SMB协议实现</p>
<h3 id="共享权限："><a href="#共享权限：" class="headerlink" title="共享权限："></a>共享权限：</h3><p>读取——查看文件名，读取文件内容</p>
<p>更改——修改内容</p>
<p>完全控制——获得所有权</p>
<p><strong>现代管理中，一般会把它设置成everyone可完全控制，直接将真正的安全控制交给更为精细的NTFS</strong></p>
<p>Tips：</p>
<p>NTFS:访问文件的精细控制<br>杈限继承：拒绝优先</p>
<h3 id="使用文件共享的方式"><a href="#使用文件共享的方式" class="headerlink" title="使用文件共享的方式"></a>使用文件共享的方式</h3><h5 id="法一"><a href="#法一" class="headerlink" title="法一"></a>法一</h5><p>win+R</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">\\Ip地址\共享文件名</span><br></pre></td></tr></table></figure>

<h5 id="法二"><a href="#法二" class="headerlink" title="法二"></a>法二</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">net use \\IP地址\共享文件名 #查看共享状态</span><br><span class="line">net use * \\IP地址\共亨文件名  #*代表共亨文件的盘符</span><br><span class="line">net use x: \\IP地址\共享文件名  指定盘符号（x盘）</span><br></pre></td></tr></table></figure>



<h3 id="域共享文件操作演示"><a href="#域共享文件操作演示" class="headerlink" title="域共享文件操作演示"></a>域共享文件操作演示</h3><p>1️⃣在Windows Server 2016域控机中，</p>
<p>打开“C盘” &gt;&gt;&gt; “属性” &gt;&gt;&gt;  “共享” &gt;&gt;&gt; “高级共享”，选中“共享此文件夹” &gt;&gt;&gt; “权限” &gt;&gt;&gt; 在组或用户名中选择“everyone” &gt;&gt;&gt; 权限部分勾选“完全控制” &gt;&gt;&gt; “应用”</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251111110539241.png" alt="image-20251111110539241"></p>
<p>2️⃣登录win7服务器，通过IP地址使用文件共享功能，访问到域控机的共享文件夹</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251111110752035.png" alt="image-20251111110752035"></p>
<p>成功访问到共享文件夹</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251111110812316.png" alt="image-20251111110812316"></p>
<h5 id="Tips："><a href="#Tips：" class="headerlink" title="Tips："></a>Tips：</h5><p>⚠️一旦进入域的里面，而且域中正开启着文件共享，通过IP就可以访问共享文件夹，根本不需要其他的用户密码了；攻击者可以在域的共享文件夹中投放木马文件，对被攻击方造成严重损失</p>
<h3 id="整个小实验"><a href="#整个小实验" class="headerlink" title="整个小实验"></a>整个小实验</h3><h4 id="实验任务"><a href="#实验任务" class="headerlink" title="实验任务"></a>实验任务</h4><p>通过AGDLP原则实现部门文件共享</p>
<p>（”A”用户，”G”全局组，”DL”本地组，”P”共享）</p>
<p>A：创建用户</p>
<p>hzangsan、lisi</p>
<p>G：创建全局组</p>
<p>GG_safe、GG_manager</p>
<p>DD：创建本地组</p>
<p>DL_beijingsafe、DL_shanghaimanager</p>
<h4 id="实验环境"><a href="#实验环境" class="headerlink" title="实验环境"></a>实验环境</h4><p>在搭建好域的Windows server 2016和win7中进行小实验</p>
<h4 id="实验内容"><a href="#实验内容" class="headerlink" title="实验内容"></a>实验内容</h4><h5 id="1️⃣创建用户"><a href="#1️⃣创建用户" class="headerlink" title="1️⃣创建用户"></a>1️⃣创建用户</h5><p>在Windows Server 2016域控机上的“开始” &gt;&gt;&gt; “Windows管理工具” &gt;&gt;&gt; “Active Directory 用户和计算机” &gt;&gt;&gt; “Users” &gt;&gt;&gt; 创建新用户zhangsan</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251111112033789.png" alt="image-20251111112033789"></p>
<p>创建lisi</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251111112155933.png" alt="image-20251111112155933"></p>
<h5 id="2️⃣创建全局组"><a href="#2️⃣创建全局组" class="headerlink" title="2️⃣创建全局组"></a>2️⃣创建全局组</h5><p>GG_safe</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251111112330095.png" alt="image-20251111112330095"></p>
<p>GG_manager</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251111112405363.png" alt="image-20251111112405363"></p>
<h5 id="3️⃣把用户加到全局组"><a href="#3️⃣把用户加到全局组" class="headerlink" title="3️⃣把用户加到全局组"></a>3️⃣把用户加到全局组</h5><p>在GG_manager选择属性，而后在成员位置加入lisi并应用</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251111121951587.png" alt="image-20251111121951587"></p>
<p>在GG_safe属性里的成员部分，添加zhangsan</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251111122137343.png" alt="image-20251111122137343"></p>
<h5 id="4️⃣创建本地组"><a href="#4️⃣创建本地组" class="headerlink" title="4️⃣创建本地组"></a>4️⃣创建本地组</h5><p>DL_beijingsafe、DL_shanghaimanager</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251111122832378.png" alt="image-20251111122832378"></p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251111122912081.png" alt="image-20251111122912081"></p>
<h5 id="5️⃣将全局组加入本地组"><a href="#5️⃣将全局组加入本地组" class="headerlink" title="5️⃣将全局组加入本地组"></a>5️⃣将全局组加入本地组</h5><p>把GG_manager加到DL_shanghaimanager</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251111123049658.png" alt="image-20251111123049658"></p>
<p>把GG_safe加到DL_beijingsafe</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251111123208912.png" alt="image-20251111123208912"></p>
<h5 id="6️⃣配置权限"><a href="#6️⃣配置权限" class="headerlink" title="6️⃣配置权限"></a>6️⃣配置权限</h5><p>使得管理组可以修改管理组内容，可以查看安全组内容</p>
<p>安全组可以修改安全组内容，不能查看管理组内容</p>
<p>在Windows Server 2016域控上新建share文件夹，在里面再新建两个文件夹——safe和manager来模拟安全组和管理组的文件夹</p>
<p>这里我们先给share文件夹改为对everyone共享</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251111124130734.png" alt="image-20251111124130734"></p>
<p>而后，对share进行安全配置添加本地组</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251111125411821.png" alt="image-20251111125411821"></p>
<h5 id="7️⃣safe和manager文件夹配置安全"><a href="#7️⃣safe和manager文件夹配置安全" class="headerlink" title="7️⃣safe和manager文件夹配置安全"></a>7️⃣safe和manager文件夹配置安全</h5><p>先在安全里面把权限继承关掉</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251111125937091.png" alt="image-20251111125937091"></p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251111130007379.png" alt="image-20251111130007379"></p>
<p>安全组不能访问manager文件夹</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251111130840898.png" alt="image-20251111130840898"></p>
<p>管理组对manager文件夹有完全控制权</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251111130930732.png" alt="image-20251111130930732"></p>
<p>管理组只能对safe文件夹只读</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251111131044596.png" alt="image-20251111131044596"></p>
<p>安全组可以对safe文件夹完全控制</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251111131114481.png" alt="image-20251111131114481"></p>
<h5 id="8️⃣验证"><a href="#8️⃣验证" class="headerlink" title="8️⃣验证"></a>8️⃣验证</h5><p>配置完成以后，可以登录lisi或者zhangsan的域账户看一下</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2025/11/17/%E6%96%87%E4%BB%B6%E5%85%B1%E4%BA%AB%E6%9C%8D%E5%8A%A1/" data-id="cuid81Ix_6uD7kEJOJKQpVFYi" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-DNS服务" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/11/17/DNS%E6%9C%8D%E5%8A%A1/" class="article-date">
  <time class="dt-published" datetime="2025-11-17T04:22:17.232Z" itemprop="datePublished">2025-11-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="DNS服务"><a href="#DNS服务" class="headerlink" title="DNS服务"></a>DNS服务</h1><h3 id="DNS定义："><a href="#DNS定义：" class="headerlink" title="DNS定义："></a>DNS定义：</h3><p>domain name system</p>
<p>IP地址</p>
<p>xxx.xxx.xxx.xxx</p>
<p>域名电话簿</p>
<h3 id="DNS核心功能："><a href="#DNS核心功能：" class="headerlink" title="DNS核心功能："></a>DNS核心功能：</h3><p>将易于记忆的域名翻译成计算机用于通信的IP</p>
<h3 id="DNS工作核心流程"><a href="#DNS工作核心流程" class="headerlink" title="DNS工作核心流程"></a>DNS工作核心流程</h3><h4 id="递归查询"><a href="#递归查询" class="headerlink" title="递归查询"></a><strong>递归查询</strong></h4><h5 id="1️⃣查看浏览器缓存"><a href="#1️⃣查看浏览器缓存" class="headerlink" title="1️⃣查看浏览器缓存"></a>1️⃣查看浏览器缓存</h5><p>浏览器开发者工具 &gt;&gt;&gt; 网络 &gt;&gt;&gt; 200的第一个数据包</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251111192042006.png" alt="image-20251111192042006"></p>
<h5 id="2️⃣通过操作系统缓存"><a href="#2️⃣通过操作系统缓存" class="headerlink" title="2️⃣通过操作系统缓存"></a>2️⃣通过操作系统缓存</h5><p>（若浏览器缓存没有查到，才会查操作系统缓存）</p>
<p>Tips：操作系统DNS缓存不是浏览的文件，存储在内存（ram） （不是外存磁盘） </p>
<p>例子：</p>
<p>在终端输入</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ipconfig</span> /displaydns</span><br></pre></td></tr></table></figure>

<p>查看</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">firefox-settings-attachments.cdn.mozilla.<span class="built_in">net</span></span><br><span class="line">    ----------------------------------------</span><br><span class="line">    记录名称. . . . . . . : firefox-settings-attachments.cdn.mozilla.<span class="built_in">net</span></span><br><span class="line">    记录类型. . . . . . . : <span class="number">5</span></span><br><span class="line">    生存时间. . . . . . . : <span class="number">530208</span></span><br><span class="line">    数据长度. . . . . . . : <span class="number">8</span></span><br><span class="line">    部分. . . . . . . . . : 答案</span><br><span class="line">    CNAME 记录  . . . . . : mozilla.map.fastly.<span class="built_in">net</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    记录名称. . . . . . . : mozilla.map.fastly.<span class="built_in">net</span></span><br><span class="line">    记录类型. . . . . . . : <span class="number">1</span></span><br><span class="line">    生存时间. . . . . . . : <span class="number">530208</span></span><br><span class="line">    数据长度. . . . . . . : <span class="number">4</span></span><br><span class="line">    部分. . . . . . . . . : 答案</span><br><span class="line">    A (主机)记录  . . . . : <span class="number">146</span>.<span class="number">75</span>.<span class="number">45</span>.<span class="number">91</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>这两段是：这两行还在缓存里，任何程序再问 “hectorstatic.baidu.com 的 IP 是什么？” 系统会直接回答：“先走 CNAME → opencdnbdv6.jomodns.com，再去查它的 A&#x2F;AAAA 记录”，而不会再向公网发起递归查询。</p>
<p>CNAME：别名</p>
<p>部分. . . . . . . . . : 答案 （dns查询出来的直接答案，标识）</p>
<p>第一部分：通过DNS查询告诉我们firefox-settings-attachments.cdn.mozilla.net，实际上需要去找mozilla.map.fastly.net</p>
<p>第二部分：通过查找mozilla.map.fastly.net找到了一个实际IPv4的地址</p>
<h5 id="3️⃣查本地敏感文件"><a href="#3️⃣查本地敏感文件" class="headerlink" title="3️⃣查本地敏感文件"></a>3️⃣查本地敏感文件</h5><p>文件地址：”C:\Windows\System32\drivers\etc\hosts”</p>
<p>操作系统检查hosts文件，查看是否有手动配置的映射关系 </p>
<h5 id="4️⃣递归DNS服务器（个人服务器来说作用不大）"><a href="#4️⃣递归DNS服务器（个人服务器来说作用不大）" class="headerlink" title="4️⃣递归DNS服务器（个人服务器来说作用不大）"></a>4️⃣递归DNS服务器（个人服务器来说作用不大）</h5><p>ISP提供的（移动，联通，电信）</p>
<p>会向<strong>路由器</strong>提问“域名对应的IP地址”</p>
<h5 id="5️⃣根域名服务器"><a href="#5️⃣根域名服务器" class="headerlink" title="5️⃣根域名服务器"></a>5️⃣根域名服务器</h5><p>查询跟域名服务器，跟域名服务器不会给出具体IP，但是会给到.com让去问他</p>
<h5 id="6️⃣顶级域名服务器-com"><a href="#6️⃣顶级域名服务器-com" class="headerlink" title="6️⃣顶级域名服务器.com"></a>6️⃣顶级域名服务器.com</h5><p>他不会告诉你具体的IP<br>但是会跟你说baidu.com是谁<br>baidu.com对应的是百度公司<br>你去问百度公司</p>
<h5 id="7️⃣权威域名服务器"><a href="#7️⃣权威域名服务器" class="headerlink" title="7️⃣权威域名服务器"></a>7️⃣权威域名服务器</h5><p>域名的IP到底是谁？</p>
<p>baidu.com所有主机的准确IP</p>
<p>baidu.com的IP是多少</p>
<p>93.184.216.34</p>
<h5 id="8️⃣返回结果"><a href="#8️⃣返回结果" class="headerlink" title="8️⃣返回结果"></a>8️⃣返回结果</h5><p>都是在毫秒内完成的</p>
<p>Tips：解析完成后会缓存下来，方便下次快速响应，减少等待解析的时间</p>
<h4 id="分开解析"><a href="#分开解析" class="headerlink" title="分开解析"></a>分开解析</h4><p><a href="http://www.baidu.com.其中：">www.baidu.com.其中：</a></p>
<p>.：根域名：DNS顶层，是被隐藏起来的起点</p>
<p>.com：顶级域名：位于域名最右侧，国家统一管理</p>
<p>baidu：一级域名：与公司相关</p>
<p>www：主机名：可以提供web服务</p>
<h4 id="重要的DNS记录类型"><a href="#重要的DNS记录类型" class="headerlink" title="重要的DNS记录类型"></a>重要的DNS记录类型</h4><p>nslookup 域名</p>
<p>nslookup -type&#x3D;记录类型（参数） 域名<br>nslookup -type&#x3D;A <a target="_blank" rel="noopener" href="http://www.baidu.com/">www.baidu.com</a></p>
<p>A记录：IPv4地址——<strong>IP和域名的基础映射</strong></p>
<p>AAAA记录：IPv6地址——<strong>IP和域名的基础映射</strong></p>
<p>CNAME：别名——<strong>信息收集会用到的，可用于查找薄弱资产</strong><br>服务分离</p>
<p>MX：邮件服务——<strong>邮件系统入口</strong><br>电子邮件路由</p>
<p>NS：由哪台DNS服务器来提供域——<strong>查询域空</strong><br>内网信息收集<br>DNS&gt;DC</p>
<p>PTR：反向解析<br>100.100.100.100&gt;&gt;&gt;hacker.com&gt;&gt;&gt;黑客公司</p>
<p>TXT：存储的文本信息——<strong>邮件安全的核心</strong><br>恶意语句</p>
<h3 id="小小实验一下"><a href="#小小实验一下" class="headerlink" title="小小实验一下"></a>小小实验一下</h3><p>实验：<br>使用NSlookup查找域名<br>nslookup 域名<br>nslookup -type&#x3D;记录类型（参数） 域名<br>nslookup -type&#x3D;A <a target="_blank" rel="noopener" href="http://www.baidu.com/">www.baidu.com</a></p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251111203252417.png" alt="image-20251111203252417"></p>
<p>Tips：</p>
<p>非权威应答：代表不是百度回答的</p>
<p>ipv4和ipv6各两个网址是因为要实现“负载均衡”（在一个服务器崩掉的时候还能保持通信）</p>
<p>nslookup -type&#x3D;mx google.com    # 查询邮件服务器<br>nslookup -type&#x3D;ns microsoft.com # 查询权威名称服务器<br>nslookup -type&#x3D;cname github.com # 查询别名记录</p>
<h3 id="应用场景"><a href="#应用场景" class="headerlink" title="应用场景"></a>应用场景</h3><p>公司内网DNS服务器</p>
<p>公共DNS服务：</p>
<p>114.114.114.114       国内的</p>
<p>8.8.8.8                        谷歌的</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2025/11/17/DNS%E6%9C%8D%E5%8A%A1/" data-id="cuidzcgOmquniJvR2BhHwCvtI" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-NTFS安全文件系统" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/11/17/NTFS%E5%AE%89%E5%85%A8%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/" class="article-date">
  <time class="dt-published" datetime="2025-11-17T04:22:09.785Z" itemprop="datePublished">2025-11-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="NTFS安全文件系统"><a href="#NTFS安全文件系统" class="headerlink" title="NTFS安全文件系统"></a>NTFS安全文件系统</h1><h4 id="文件系统共有三种类型："><a href="#文件系统共有三种类型：" class="headerlink" title="文件系统共有三种类型："></a>文件系统共有三种类型：</h4><ul>
<li><p>NTFS安全文件系统：</p>
<p>这是Windows操作系统标准的文件系统，具有Windows特性，重要的是它<strong>支持4GB以上的文件传输</strong>。</p>
</li>
<li><p>FAT32：</p>
<p>通用的，有些U盘就是这个FAT32文件系统，不支持4GB以上的文件传输。</p>
</li>
<li><p>EXT4:</p>
<p>适用于Linux。</p>
</li>
</ul>
<h4 id="NTFS安全文件系统的主要权限"><a href="#NTFS安全文件系统的主要权限" class="headerlink" title="NTFS安全文件系统的主要权限"></a>NTFS安全文件系统的主要权限</h4><p>NTFS安全文件系统的使用权限只要体现为——他决定了哪些用户或者用户组，可以通过哪些方式，对系统资源进行访问（哪些用户拥有“写入”、“读取”、“修改”、“完全控制”权限）</p>
<h4 id="注意⚠️“权限是相加得来的”"><a href="#注意⚠️“权限是相加得来的”" class="headerlink" title="注意⚠️“权限是相加得来的”"></a>注意⚠️“权限是相加得来的”</h4><p>即用户可能会在多个组中，有各个组的权限，只要没有哪个组对其一些权限进行“拒绝”，该用户拥有的权限就为他所在各个组权限的集合。</p>
<p><strong>这里介绍一个组</strong>，“AUthenticated users”这个组是包含了所有已经通过了身份验证，成功登录到本台计算机的用户，该组会拥有一定的特殊权限配置</p>
<h4 id="NTFS权限对于安全的意义"><a href="#NTFS权限对于安全的意义" class="headerlink" title="NTFS权限对于安全的意义"></a>NTFS权限对于安全的意义</h4><ol>
<li>保密性：未被授权的用户和组都不能访问敏感文件</li>
<li>数据完整性：未被授权的用户和组都不能修改删除敏感文件</li>
<li>权限最小化原则：用户只拥有完成工作的最小必需权限</li>
</ol>
<h4 id="各个权限的简要理解"><a href="#各个权限的简要理解" class="headerlink" title="各个权限的简要理解"></a>各个权限的简要理解</h4><ul>
<li>完全控制：拥有对该文件的最高权限，可以对该文件及其子文件进行增删改查的任意操作，还可以对该文件的权限设置进行修改，可以变更所有权。</li>
<li>修改：可以对该文件进行增删改查，但是对于该文件的权限是无权修改的。</li>
<li>读取和执行：可以进入该文件夹，查看文件夹内的文件，但对文件内容没有修改权限。</li>
<li>读取：可以查看文件内容，例如属性和详细信息，隐藏信息等</li>
<li>写入：可以创建新的文件夹</li>
<li>特殊权限：以上所有权限的集合，点击高级还能更细的配置权限。</li>
</ul>
<h4 id="权限继承"><a href="#权限继承" class="headerlink" title="权限继承"></a>权限继承</h4><p>默认情况下，父文件夹设置的权限可以继承给子文件夹</p>
<p>优点是：便于管理，只需在顶级目录设置一次权限即可适用于整个子目录</p>
<p>可以禁用</p>
<h4 id="有效权限"><a href="#有效权限" class="headerlink" title="有效权限"></a>有效权限</h4><p>一个用户可能同时属于多个组，这个用户对于文件的权限，实际上就是这些组对文件权限的相加；</p>
<p>⚠️拒绝权限是高于所有其他权限的，只要明确拒绝了的，无论他在什么组里组里有多高的权限，只要明确拒绝，就是不可使用该权限，且拒绝的权限只针对于这一个文件而对该文件夹内的其他文件无效。</p>
<h4 id="我们来做几个小实验-熟悉一下"><a href="#我们来做几个小实验-熟悉一下" class="headerlink" title="我们来做几个小实验,熟悉一下"></a>我们来做几个小实验,熟悉一下</h4><h5 id="1️⃣图形化设置文件权限"><a href="#1️⃣图形化设置文件权限" class="headerlink" title="1️⃣图形化设置文件权限"></a>1️⃣图形化设置文件权限</h5><p>C:\ 新建一个文件夹test，test文件夹里面新建一个test1文件夹、test.txt文本文件</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251110161425515.png" alt="image-20251110161425515"></p>
<p>新建用户test，给用户test设置不能修改权限  </p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251110161241869.png" alt="image-20251110161241869"></p>
<p>给test文件属性中，安全模块下添加针对test用户的安全权限策略，并把“修改”选为拒绝，而后点击应用</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251110161940756.png" alt="image-20251110161940756"></p>
<p>切换test用户进行验证</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251110162207583.png" alt="image-20251110162207583"></p>
<p>验证成功</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251110162539195.png" alt="image-20251110162539195"></p>
<h5 id="2️⃣命令行设置文件权限"><a href="#2️⃣命令行设置文件权限" class="headerlink" title="2️⃣命令行设置文件权限"></a>2️⃣命令行设置文件权限</h5><p>使用管理员权限打开命令提示符</p>
<p><strong>查看该文件的信息</strong></p>
<p>icacls “文件夹绝对路径”</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251110164001747.png" alt="image-20251110164001747"></p>
<p>OI：对象继承，该文件夹的权限应用于<strong>文件</strong><br>CI：容器继承，该文件夹的权限应用于<strong>子文件夹</strong><br>I：这个权限是从父对象继承的（继承来的权限）<br>M：权限修改<br>F：完全控制<br>RX：读取+执行</p>
<p><strong>赋予权限</strong></p>
<p>icacls 文件夹绝对路径 &#x2F;grant 用户:(权限)</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251110163943484.png" alt="image-20251110163943484"></p>
<p>.bat</p>
<p>icacls 文件夹绝对路径 &#x2F;grant 用户:(RX)</p>
<p>可以用于给写好的脚本文件赋予执行权限</p>
<p><strong>删除权限</strong></p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251110164446216.png" alt="image-20251110164446216"></p>
<p>icacls 文件夹绝对路径 &#x2F;remove 用户<br>icacls “C:\test” &#x2F;remove test</p>
<p><strong>禁用继承</strong><br>icacls 文件夹绝对路径 &#x2F;inheritance:d</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2025/11/17/NTFS%E5%AE%89%E5%85%A8%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/" data-id="cuidipWHSFbx5PYC1sCvylv_4" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-hexo个人博客搭建" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/11/17/hexo%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/" class="article-date">
  <time class="dt-published" datetime="2025-11-17T04:22:03.400Z" itemprop="datePublished">2025-11-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="hexo个人博客搭建"><a href="#hexo个人博客搭建" class="headerlink" title="hexo个人博客搭建"></a>hexo个人博客搭建</h1><h4 id="按照官网文档提示，安装以下两个依赖项："><a href="#按照官网文档提示，安装以下两个依赖项：" class="headerlink" title="按照官网文档提示，安装以下两个依赖项："></a>按照官网文档提示，<strong>安装以下两个依赖项</strong>：</h4><p>nodejs、git</p>
<p>安装完毕后可以通过</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">node -v</span><br><span class="line">git -v </span><br></pre></td></tr></table></figure>

<p>进行验证</p>
<h4 id="创建并安装基础的博客"><a href="#创建并安装基础的博客" class="headerlink" title="创建并安装基础的博客"></a>创建并安装基础的博客</h4><p>创建一个用于搭建博客的文件夹，</p>
<p>在文件夹通过</p>
<p>右键 &gt;&gt;&gt; “open git bash here”</p>
<p>打开git终端</p>
<p>而后，进行hexo的基础安装</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-cli -g</span><br></pre></td></tr></table></figure>

<p>并通过</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo -v</span><br></pre></td></tr></table></figure>

<p>验证</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251110194015141.png" alt="image-20251110194015141"></p>
<h4 id="克隆仓库"><a href="#克隆仓库" class="headerlink" title="克隆仓库"></a>克隆仓库</h4><p>从github上克隆hexo的官方模板仓库</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo init blog</span><br></pre></td></tr></table></figure>

<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251110194241001.png" alt="image-20251110194241001"></p>
<h4 id="安装npm"><a href="#安装npm" class="headerlink" title="安装npm"></a>安装npm</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> blog //进入blog文件夹</span><br><span class="line">npm install  //安装npm</span><br></pre></td></tr></table></figure>

<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251110194415141.png" alt="image-20251110194415141"></p>
<h4 id="本地运行"><a href="#本地运行" class="headerlink" title="本地运行"></a>本地运行</h4><p>键入hexo server，成功启动</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251110194432946.png" alt="image-20251110194432946"></p>
<p>而后，在浏览器输入url为127.0.0.1:4000的本地4000端口，成功在本地运行个人hexo博客</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251110194604020.png" alt="image-20251110194604020"></p>
<p>基础搭建完成</p>
<h4 id="发布新文章"><a href="#发布新文章" class="headerlink" title="发布新文章"></a>发布新文章</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new <span class="string">&quot;文章名&quot;</span></span><br></pre></td></tr></table></figure>

<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251110195352697.png" alt="image-20251110195352697"></p>
<p>然后我们就会收获到一个名为“好好学习天天向上“的文章</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251110195533035.png" alt="image-20251110195533035"></p>
<p>可以打开看一下，注意⚠️title，date等的冒号后面要敲一个空格（特殊格式）</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251110195811574.png" alt="image-20251110195811574"></p>
<p>hexo s 后可在浏览器看到刚刚发布的新文章</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251110200125109.png" alt="image-20251110200125109"></p>
<p>部署在云服务器上得生成静态文件然后上传到云服务器</p>
<p>发布更新博客的命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo g 生成静态文件</span><br><span class="line">hexo d 将生成的文件上传到云</span><br><span class="line">hexo c 清理缓存</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2025/11/17/hexo%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/" data-id="cuid74oVMekq1oaVWyDsbhJf3" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-域和工作组" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/11/17/%E5%9F%9F%E5%92%8C%E5%B7%A5%E4%BD%9C%E7%BB%84/" class="article-date">
  <time class="dt-published" datetime="2025-11-17T04:21:58.244Z" itemprop="datePublished">2025-11-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="域和工作组"><a href="#域和工作组" class="headerlink" title="域和工作组"></a>域和工作组</h1><h4 id="基础知识"><a href="#基础知识" class="headerlink" title="基础知识"></a>基础知识</h4><p>1.工作组的定义：</p>
<p>将不同的电脑按照一定的功能或者部门分类，划分到不同的组中（工作组）。【有序，方便查找】</p>
<p>2.域的定义：</p>
<p>domain，域是有<strong>安全边界</strong>的计算机集合（同一个域中的电脑可以相互访问，但不同域间的电脑不可以互相访问）</p>
<ul>
<li><p>域相对于组来讲有着更加严格的安全管理机制——某台主机想访问一个域中的用户或者作为管理员对域进行管理时必须拥有一个合法的身份登录到域，而主机对域操作的权限取决于该主机登录访问域时的身份（访客&#x2F;成员&#x2F;管理员）</p>
</li>
<li><p>域的管理员只能管理这一个域，除非再赋予他其他域的管理权限才可以对其他域进行操作</p>
</li>
<li><p>每个域也都拥有各自的安全策略</p>
</li>
</ul>
<h4 id="域相关的安全操作"><a href="#域相关的安全操作" class="headerlink" title="域相关的安全操作"></a>域相关的安全操作</h4><p>1.收集域内信息（对于域的用户、计算机、工作组、服务，要找到高权限用户、计算机域控、文件服务器、sql服务器，一些被赋有特权的工作组、各个域之间的信任关系，还有各种权限和开放的端口等信息）</p>
<p>2.发现域内关键服务器</p>
<p>3.由于需要合法身份信息，要获取一些身份认证和凭证等内容</p>
<p>4.普通用户对域进行提权</p>
<p>5.横向移动</p>
<p>6.权限维持</p>
<p>7.组策略</p>
<h4 id="域的分类"><a href="#域的分类" class="headerlink" title="域的分类"></a>域的分类</h4><p>1.单域</p>
<p>域内的用户或者公司员工没那么多，建立一个域就够用；根据不同部门创建并分为各个工作组即可</p>
<p>2.父域子域</p>
<p>父域，由总部总公司创建；子域，由分部子公司创建子域。</p>
<p>父域子域之中可以有相互的信任关系，子域不能管理其他子域，但是可能可以互相访问或者，总部父域可能可以对若干子域进行管理。</p>
<p>3.域树</p>
<p>4.域林（包括信任关系，信任传递等）信息</p>
<p>5.DNS域名服务器（通讯录）</p>
<p>进行域名和IP地址转换的服务器：例如把192.168.xx.xx转换成<a target="_blank" rel="noopener" href="http://www.xxx.com/">www.xxx.com</a></p>
<p>6.DC域控（域控制器）</p>
<p>（类似保安，对进出人员进行身份验证）</p>
<p>拿到域控之后我们可以进行添加合法身份</p>
<h4 id="域内权限：三个组"><a href="#域内权限：三个组" class="headerlink" title="域内权限：三个组"></a>域内权限：三个组</h4><ul>
<li><p>本地组：</p>
<p>任何域的用户、同一个域的其他域本地组，可在创建他的域内进行使用</p>
<p>是赋予一定<strong>权限的集合</strong>。</p>
</li>
<li><p>全局组：同一个域的用户，同一个域的其他全局组，可在整个林中的所有域进行使用</p>
<p>是<strong>用户的集合</strong>。</p>
</li>
<li><p>通用组：</p>
<p><strong>组的集合</strong>。</p>
</li>
</ul>
<h4 id="如何搭建域？"><a href="#如何搭建域？" class="headerlink" title="如何搭建域？"></a>如何搭建域？</h4><p>1️⃣准备好虚拟机环境（至少两台）</p>
<p>我们这里用</p>
<p>windows7 &gt;&gt;&gt; web服务器</p>
<p>Windows server 2016 &gt;&gt;&gt; 域控制器</p>
<p>2️⃣配置网络，使得域内设备都可以正常通信</p>
<p>这里我们配置如下：</p>
<ul>
<li><p>192.168.10.10		域控</p>
<p>给server 2016主机网卡连接模式改为vmnet2仅主机模式</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251109145402344.png" alt="image-20251109145402344"></p>
<p>配置server 2016的ipv4为192.168.10.10</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251109144840601.png" alt="image-20251109144840601"></p>
</li>
<li><p>192.168.10.20        web服务器（外界可访问，所以需要给web服务器主机配置双网卡）</p>
<p>先为服务器主机配置上双网卡；一个是nat模式；一个是和域控一致的vmnet2仅主机模式</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251109145530160.png" alt="image-20251109145530160"></p>
<p>然后配置并检查网卡IP，其中一个是nat模式连接的我的是192.168.88.146，另一个是vmnet2的配置为192.168.10.20</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251109153005119.png" alt="image-20251109153005119"></p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251109153025571.png" alt="image-20251109153025571"></p>
<p>最好检查，可以互相ping通</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251109153102140.png" alt="image-20251109153102140"></p>
</li>
</ul>
<p>3️⃣安装域控制器</p>
<p>从server 2016打开<strong>服务器管理器</strong>，打开<strong>添加角色和功能</strong>，在<strong>服务器角色</strong>部分勾选上<strong>AD域服务</strong>和<strong>DNS服务器</strong></p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251109153931507.png" alt="image-20251109153931507"></p>
<p>功能部分勾选文件共享支持和防火墙</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251109154149349.png" alt="image-20251109154149349"></p>
<p>一直下一步安装就好</p>
<p>而后点击将此服务器提升为域控制器</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251109154551695.png" alt="image-20251109154551695"></p>
<p>添加新林：起一个高端大气上档次的名字</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251109154722902.png" alt="image-20251109154722902"></p>
<p>设置完密码之后，会给分配出名称</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251109155001399.png" alt="image-20251109155001399"></p>
<p>通过先决条件检查后，继续安装</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251109155141982.png" alt="image-20251109155141982"></p>
<p>安装完毕之后会自动重启，登录时会发现，用户名前面已经加上了域名Sun	</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251109160359473.png" alt="image-20251109160359473"></p>
<p>4️⃣加入域</p>
<p>win7服务器打开计算机 &gt;&gt;&gt; 属性 &gt;&gt;&gt; 高级系统设置 &gt;&gt;&gt; 更改</p>
<p>来更改计算机名&#x2F;域</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251109160631711.png" alt="image-20251109160631711"></p>
<p>更改域<img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251109160750946.png" alt="image-20251109160750946"></p>
<p>而后会提示输入用户密码，注意⚠️这里要求输入的域控机的管理员账号密码</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251109160926727.png" alt="image-20251109160926727"></p>
<p>加入域成功！</p>
<p>按照要求输入域名\用户名即可登录到新创建的sun域</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251109161252389.png" alt="image-20251109161252389"></p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251109161325620.png" alt="image-20251109161325620"></p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251109161356919.png" alt="image-20251109161356919"></p>
<p>登录后，可命令提示符验证</p>
<p>ipconfig &#x2F;flushdns刷新dns缓存，然后nslookup 域名 IP解析来验证</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251109161815598.png" alt="image-20251109161815598"></p>
<p>至此，完成了创建域到将服务器加入域的全部操作！</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2025/11/17/%E5%9F%9F%E5%92%8C%E5%B7%A5%E4%BD%9C%E7%BB%84/" data-id="cuidVawQ8aY-wB4keMXdh_gFt" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-综合实验" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/11/17/%E7%BB%BC%E5%90%88%E5%AE%9E%E9%AA%8C/" class="article-date">
  <time class="dt-published" datetime="2025-11-17T04:21:52.232Z" itemprop="datePublished">2025-11-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="综合实验："><a href="#综合实验：" class="headerlink" title="综合实验："></a>综合实验：</h1><p>全程模拟攻击行为，进行溯源</p>
<p>1、部署监控：配置审计策略<br>secpol.msc	#打开本地策略<br>审核账户登录事件</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251106110526189.png" alt="image-20251106110526189"></p>
<p>审核账户管理</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251106110543790.png" alt="image-20251106110543790"></p>
<p>2、模拟攻击行为：触发可疑事件<br>创建一个后门用户	$<br>net user 用户名$ 密码 &#x2F;add</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251106110644707.png" alt="image-20251106110644707"></p>
<p>权限提升<br>把用户加到管理员组net localgroup 组名 用户名 &#x2F;add</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251106110757472.png" alt="image-20251106110757472"></p>
<p>故意输错几次密码	爆破</p>
<p>切换用户hacker$，输入若干次错误密码模拟暴力破解行为</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251106110935942.png" alt="image-20251106110935942"></p>
<p>而后，输入正确密码</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251106111015245.png" alt="image-20251106111015245"></p>
<p>3、收集和分析：日志分析<br>eventvwr.msc查看事件管理器</p>
<p>4625：失败<br>4624：成功<br>4720：添加用户<br>4732：添加到本地组<br>4748</p>
<p>筛选ID为4625的账户登录失败任务可以看到如图的四次爆破行为</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251106111614603.png" alt="image-20251106111614603"></p>
<p>筛选ID为4624的账户登录成功任务可以看到如图的爆破成功，hacker进入的行为</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251106111856290.png" alt="image-20251106111856290"></p>
<p>筛选ID为4720的添加用户任务可以看到模拟的hacker创建后门用户的日志</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251106112036188.png" alt="image-20251106112036188"></p>
<p>筛选ID为4732的添加用户到组的提权任务可以看到hacker的提权到Administrators组的提权记录</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251106112201518.png" alt="image-20251106112201518"></p>
<p>4、对整个事件进行还原<br>谁什么时候干了什么，可能造成什么影响</p>
<p>2025&#x2F;11&#x2F;06 11:06:30时间，攻击者在系统内创建了hacker$账户作为后门账户</p>
<p>2525&#x2F;11&#x2F;06 11:07:13时间，攻击者进行了对hacker$账户的提权，将hacker$加到了Administrators组之中拥有了管理员权限，有极大可能造成关键数据泄露，数据丢失，系统信息被篡改等危害</p>
<p>2025&#x2F;11&#x2F;06 11:09:28至11:09:44时间段内，hacker$对系统进行了4次未成功的登录行为，属于黑客暴力破解行为，被攻击会有可能被爆破出来账号密码，会对系统安全造成威胁。</p>
<p>2025&#x2F;11&#x2F;06 11:13:04时间，hacker$成功爆破出来密码，成功登录系统</p>
<p>5、实验环境清理<br>删除用户</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251106125451279.png" alt="image-20251106125451279"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2025/11/17/%E7%BB%BC%E5%90%88%E5%AE%9E%E9%AA%8C/" data-id="cuid-jcKbf5ARU-6Vo-f0NQag" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-用户和组" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/11/17/%E7%94%A8%E6%88%B7%E5%92%8C%E7%BB%84/" class="article-date">
  <time class="dt-published" datetime="2025-11-17T04:21:50.064Z" itemprop="datePublished">2025-11-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="用户和组"><a href="#用户和组" class="headerlink" title="用户和组"></a>用户和组</h1><h4 id="1、日常使用中，你应该使用哪种类型的账户？为什么？"><a href="#1、日常使用中，你应该使用哪种类型的账户？为什么？" class="headerlink" title="1、日常使用中，你应该使用哪种类型的账户？为什么？"></a>1、日常使用中，你应该使用哪种类型的账户？为什么？</h4><p>日常使用中我们通常使用的是users组里的普通用户，原因如下：</p>
<p>1️⃣最小权限原则</p>
<p>我们平常使用Windows电脑使用的功能大多是用来工作学习娱乐等功能，如使用office系列工具处理文档，用一些浏览器、微信、QQ、网易云音乐、腾讯视频、wegame、Steam等社交娱乐软件，并不需要执行改变系统关键设置或添加更改全局变量等行为，所以普通用户的权限是足够的。</p>
<p>而一旦我们使用Administrators组中的管理员账号，一旦我们不小心点击到类似钓鱼链接或者被普通病毒入侵，会造成严重的威胁和后果，如关键信息和数据被勒索等，但是当我们只是使用普通用户账号，就算被感染也只是在当前用户下被破坏，不会对全局实现修改注入等攻击。</p>
<p>2️⃣防止误操作</p>
<p>我们只是用普通用户还可以防止我们在使用计算机的时候一不小心造成误操作，如失误关闭了防火墙和实时保护等功能，有可能会被攻击者钻了空子，造成主机失陷；清理内存和磁盘时，误操作删除系统配置文件等，但是如果是系统管理员用户就有可能造成这样的问题。</p>
<p>3️⃣预防漏洞被利用</p>
<p>普通用户不会在遇到一些老的漏洞时被轻易攻破，例如远程登录等，攻击者无法因为攻破了我们的主机就进行提权操作</p>
<h4 id="2、创建一个后门用户，设置密码，实现登录"><a href="#2、创建一个后门用户，设置密码，实现登录" class="headerlink" title="2、创建一个后门用户，设置密码，实现登录"></a>2、创建一个后门用户，设置密码，实现登录</h4><p>创建后门用户，并加到了管理员组</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251106155711842.png" alt="image-20251106155711842"></p>
<p>实现登录：</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251106155711842.png" alt="image-20251106155809794"></p>
<h4 id="3、如果发现一个陌生用户被加入了-Remote-Desktop-Users组，这可能意味着什么安全风险？该怎么做？写出过程、以及原因"><a href="#3、如果发现一个陌生用户被加入了-Remote-Desktop-Users组，这可能意味着什么安全风险？该怎么做？写出过程、以及原因" class="headerlink" title="3、如果发现一个陌生用户被加入了 Remote Desktop Users组，这可能意味着什么安全风险？该怎么做？写出过程、以及原因"></a>3、如果发现一个陌生用户被加入了 <code>Remote Desktop Users</code>组，这可能意味着什么安全风险？该怎么做？写出过程、以及原因</h4><p>1️⃣当发现一个陌生用户被加入到了Remote Desktop Users组中，这意味着该用户已经<strong>具备了远程桌面登录本机的权限</strong>，可以随时通过RDP连入本机，我们很有可能已经被黑客攻陷，可能正在或已经被通过<strong>未授权的远程登录的攻击行为</strong>实行了篡改或窃取，也有可能已经在我们电脑中植入了其他的木马文件或恶意脚本，更有可能已经写入了攻击后门账户，也可能进行了横移，提权，窃密，进行勒索软件投放等操作并有可能进行了日志擦除和迷惑性行为来误导我们的防御。</p>
<p>2️⃣该怎么做：</p>
<p>我们应该像做应急响应项目类似的<strong>先隔离，再删权，再溯源，再封堵修复</strong>：</p>
<p>1.先进行对该危险账户的隔离，立即把它踢下线并对其进行禁用或者直接删除；</p>
<p>2.而后可以通过eventvwr.msc打开事件查看器查看Windows安全日志，筛选任务ID为4624用户登录失败（多次就是在爆破）、4625（用户成功登录，可能是爆破成功后的登录）、4672、4720（添加用户，如攻击用户，后门）、4732（将后门账户加入组）等任务，进行溯源；</p>
<p>3.然后就是取证，要记录攻击者的源IP，每个任务发生的时间，登录类型等信息，并把.evtx日志另存作为证据；</p>
<p>4.然后进行封堵，我们要做一些包括但不限于关闭3389端口或者从防火墙规则中配置使用白名单等操作、检查路由器route端口映像有没有被篡改等；</p>
<p>5.立即将本机的管理员账户密码全部更换成强密码，减少被爆破的可能性，要让所有管理员用户升级系统补丁，对后门进行彻底查杀，可以使用杀毒软件进行全盘的杀毒等</p>
<p>6.最后还要对策略配置加固，比如最简单的调整secpol.msc里面的账户锁定阈值配置5次登录失败进行半小时锁定等</p>
<h4 id="4、尝试编写一个批处理脚本（-bat），实现自动创建一个名为-auto-user的用户，并将其添加到-administartos组；运行结果以及运行源代码"><a href="#4、尝试编写一个批处理脚本（-bat），实现自动创建一个名为-auto-user的用户，并将其添加到-administartos组；运行结果以及运行源代码" class="headerlink" title="4、尝试编写一个批处理脚本（.bat），实现自动创建一个名为 auto_user的用户，并将其添加到 administartos组；运行结果以及运行源代码"></a>4、尝试编写一个批处理脚本（.bat），实现自动创建一个名为 <code>auto_user</code>的用户，并将其添加到 <code>administartos</code>组；运行结果以及运行源代码</h4><p>提示：net user net localgroup</p>
<p>源代码：</p>
<figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"><span class="built_in">title</span> 我能直接创建一个管理员用户，羡慕吧~</span><br><span class="line"><span class="built_in">color</span> <span class="number">02</span></span><br><span class="line"></span><br><span class="line">:menu</span><br><span class="line"><span class="built_in">cls</span></span><br><span class="line"><span class="built_in">echo</span> ====================</span><br><span class="line"><span class="built_in">echo</span>       羡慕我吧~~~</span><br><span class="line"><span class="built_in">echo</span> ====================</span><br><span class="line"><span class="built_in">echo</span>.</span><br><span class="line"><span class="built_in">echo</span> <span class="number">1</span>.直接给我创创创！</span><br><span class="line"><span class="built_in">echo</span> <span class="number">2</span>.我后悔了，我害怕┭┮﹏┭┮</span><br><span class="line"><span class="built_in">echo</span>.</span><br><span class="line"><span class="built_in">echo</span> ====================</span><br><span class="line"><span class="built_in">set</span> /p num=接下来，你的选择是（<span class="number">1</span>/<span class="number">2</span>）:</span><br><span class="line"><span class="keyword">if</span> &quot;<span class="variable">%num%</span>&quot;==&quot;<span class="number">1</span>&quot; <span class="keyword">goto</span> start_menu</span><br><span class="line"><span class="keyword">if</span> &quot;<span class="variable">%num%</span>&quot;==&quot;<span class="number">2</span>&quot; <span class="keyword">goto</span> exit_program</span><br><span class="line"><span class="built_in">echo</span>.</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> 【错误】懂不懂规矩，不要输入除了（<span class="number">1</span>，<span class="number">2</span>）以外的数字！</span><br><span class="line"><span class="built_in">echo</span>.</span><br><span class="line"><span class="built_in">pause</span> &gt; <span class="built_in">nul</span></span><br><span class="line"><span class="keyword">goto</span> menu</span><br><span class="line"></span><br><span class="line">:start_menu</span><br><span class="line"><span class="built_in">cls</span></span><br><span class="line"><span class="built_in">echo</span> ====================</span><br><span class="line"><span class="built_in">echo</span>        开整</span><br><span class="line"><span class="built_in">echo</span> ====================</span><br><span class="line"><span class="built_in">echo</span> 我们会创建一个名为auto_user的管理员用户哦~</span><br><span class="line"><span class="built_in">echo</span>.</span><br><span class="line"><span class="built_in">set</span> /p password=接下来请输入你要设置的密码吧：</span><br><span class="line"><span class="built_in">echo</span>.</span><br><span class="line"><span class="built_in">net</span> user auto_user &quot;<span class="variable">%password%</span>&quot; /add &gt;<span class="built_in">nul</span> <span class="number">2</span>&gt;&amp;<span class="number">1</span> &amp;&amp; (</span><br><span class="line">    <span class="built_in">net</span> localgroup administrators auto_user /add &gt;<span class="built_in">nul</span> <span class="number">2</span>&gt;&amp;<span class="number">1</span>&amp;&amp; (</span><br><span class="line">        <span class="built_in">echo</span>.</span><br><span class="line">        <span class="built_in">echo</span> 【OK】auto_user 已创建并升管理员！</span><br><span class="line">    ) || (</span><br><span class="line">        <span class="built_in">echo</span>.</span><br><span class="line">        <span class="built_in">echo</span> 【失败】用户建了但加组失败...</span><br><span class="line">    )</span><br><span class="line">) || (</span><br><span class="line">    <span class="built_in">echo</span>.</span><br><span class="line">    <span class="built_in">echo</span> 【失败】用户没建成，请检查是不是已存在该用户...</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">pause</span></span><br><span class="line"><span class="keyword">goto</span> menu</span><br><span class="line"></span><br><span class="line">:exit_program</span><br><span class="line"><span class="built_in">cls</span></span><br><span class="line"><span class="built_in">echo</span>.</span><br><span class="line"><span class="built_in">echo</span> 感谢使用我的小脚本，再见！</span><br><span class="line"><span class="built_in">echo</span>.</span><br><span class="line">timeout /t <span class="number">2</span> /nobreak &gt;<span class="built_in">nul</span></span><br><span class="line"><span class="keyword">exit</span></span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<p>1️⃣双击程序：</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251106174129198.png" alt="image-20251106174129198"></p>
<p>2️⃣选择1，回车：</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251106174148864.png" alt="image-20251106174148864"></p>
<p>3️⃣设置密码123，回车：</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251106174233011.png" alt="image-20251106174233011"></p>
<p>4️⃣任意按键后，选择2，回车：</p>
<p><img src="https://raw.githubusercontent.com/kobe88889/Images/main/image-20251106174312579.png" alt="image-20251106174312579"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2025/11/17/%E7%94%A8%E6%88%B7%E5%92%8C%E7%BB%84/" data-id="cuidT1D5zHN4CLg2FH9eog-vz" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/11/">November 2025</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2025/11/17/DC-2%E9%80%9A%E5%85%B3/">(no title)</a>
          </li>
        
          <li>
            <a href="/2025/11/17/http%E5%8D%8F%E8%AE%AE/">(no title)</a>
          </li>
        
          <li>
            <a href="/2025/11/17/burpsuit%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8/">(no title)</a>
          </li>
        
          <li>
            <a href="/2025/11/17/%E6%96%87%E4%BB%B6%E5%85%B1%E4%BA%AB%E6%9C%8D%E5%8A%A1/">(no title)</a>
          </li>
        
          <li>
            <a href="/2025/11/17/DNS%E6%9C%8D%E5%8A%A1/">(no title)</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2025 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>